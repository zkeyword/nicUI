<!DOCTYPE HTML>
<html lang="en-US">
<head>
@@include('../../common/include.html')
</head>
<body>
	<div id="demo-wrap">
		@@include('../../common/header.html')
		<div id="demo-main" class="fn-clear">
			@@include('../../common/menu.html', {"validator": "on", "js":"on"})
			<div id="demo-right" class="fn-right">
				<h4>调用效果</h4>
				<form name="test" id="test" class="fn-clear">
					<!--
					<div class="ui-form fn-clear" id="requiredWrap">
						<label>
							<i class="ui-label ui-w400">隐藏后校验，如select模拟(data-ishideValidte="true")：</i>
							<input class="ui-input fn-hide" id="dd2" type="text" data-ishideValidte="true" data-validate="required;number;floatNumber=2" data-validate-requiredText="xxx,必填" />
							<span class="ui-form-message" id="dd">xx</span>
						</label>
					</div>
					-->
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">下拉框(select=0)：</i>
							<select class="ui-select" id="select" data-validate="select="  data-validate-selectText="请选择">
								<option value="">请选择</option>
								<option value="1">1</option>
								<option value="2">2</option>
							</select>
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">必填(required)：</i>
							<input class="ui-input" type="text" data-validate="required;number;floatNumber=2" data-validate-requiredText="xxx,必填" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">数字(number)：</i>
							<input class="ui-input" type="text" data-validate="number;" data-validate-numberText="xxx,必填"  />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">浮点(floatNumber=2)：</i>
							<input class="ui-input" type="text" data-validate="floatNumber=2" data-validate-floatNumberText="输入字符长度等于{{param}}个字符" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">整数(integer)：</i>
							<input class="ui-input" type="text" data-validate="integer;" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">正整数(digits)：</i>
							<input class="ui-input" type="text" data-validate="digits;" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">固定长度(length=4)：</i>
							<input class="ui-input" type="text" data-validate="length=4;" data-validate-lengthText="输入字符长度等于{{param}}个字符" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">最大长度(maxLength=4)：</i>
							<input class="ui-input" type="text" data-validate="maxLength=4;" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">最小长度(minLength=4)：</i>
							<input class="ui-input" type="text" data-validate="minLength=4;" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">邮箱(email)：</i>
							<input class="ui-input" type="text" data-validate="email" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">正则(format=正则)：</i>
							<input class="ui-input" type="text" data-validate="format=\w{1,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$" data-validate-formatText="以邮箱为例，请输入正确的邮箱格式" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">网址(url)：</i>
							<input class="ui-input" type="text" data-validate="url" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">手机或电话(phone)：</i>
							<input class="ui-input" type="text" data-validate="phone" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">手机(mobile)：</i>
							<input class="ui-input" type="text" data-validate="mobile" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">特殊条件(process)：</i>
							<input id="testProcess" class="ui-input" type="text" data-validate="process" data-validate-processText="请按照条件填写" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">ajax(ajax)：</i>
							<input id="testProcess2" class="ui-input" type="text" data-validate="ajax" data-validate-ajaxText="请按照条件填写" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">ajax(ajax)：</i>
							<input class="ui-input" type="text" data-validate="ajax=http://127.0.0.1/nic/www/temp/validate2.php?id=1&pid=2&name={{value}}" data-validate-ajaxText="name字段不能为空"  />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear fn-hide" id="requiredWrap">
						<label>
							<i class="ui-label ui-w400">隐藏不校验：</i>
							<input class="ui-input" type="text" data-validate="required;number;floatNumber=2" data-validate-requiredText="xxx,必填" />
							<span class="ui-form-message"></span>
						</label>
					</div>
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">radio校验(check)：</i>
						</label>
						<label class="ui-pl10">
							<input type="radio" class="ui-radio" name="textRaio" value="1" data-validate="check" />
							<i class="ui-label ui-radio-label">显示</i>
						</label>
						<label class="ui-pl10">
							<input type="radio" class="ui-radio " name="textRaio" value="2" data-validate="check"  />
							<i class="ui-label ui-radio-label">隐藏</i>
						</label>
						<span class="ui-form-message"></span>
					</div>
					
					
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">checkbox校验(check)：</i>
						</label>
						<label class="ui-pl10">
							<input type="checkbox" class="ui-checkbox" name="checkbox" value="多选选项1" data-validate="check" />
							<i class="ui-label ui-checkbox-label">多选选项1</i>
						</label>
						<label class="ui-pl10">
							<input type="checkbox" class="ui-checkbox" name="checkbox" value="多选选项1" data-validate="check" />
							<i class="ui-label ui-checkbox-label">多选选项1</i>
						</label>
						<span class="ui-form-message"></span>
					</div>
					
					
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">ajax(ajax)：</i>
							<input class="ui-input" type="text" data-validate="ajax=http://127.0.0.1/nic/www/temp/validate2.php?id=1&pid=2&name={{value}}" data-validate-ajaxText="name字段不能为空"  />
							<span class="ui-form-message"></span>
						</label>
					</div>
					
					<div class="ui-form fn-clear">
						<label>
							<i class="ui-label ui-w400">多框单项校验(data-validate-name)：</i>
						</label>
						<label class="ui-pl10">
							<input type="text" class="ui-input" data-validate="required;number;floatNumber=2" data-validate-name="xxx" data-validate-requiredText="xxx,必填1"  />
						</label>
						<label class="ui-pl10">
							<input type="text" class="ui-input" data-validate="required;number;floatNumber=2" data-validate-name="xxx" data-validate-requiredText="xxx,必填2"  />
						</label>
						<label class="ui-pl10">
							<input type="text" class="ui-input" data-validate="required;number;floatNumber=2" data-validate-name="xxx" data-validate-requiredText="xxx,必填2"  />
						</label>
						<span class="ui-form-message"></span>
					</div>
					<div class="fn-clear">
						<input type="submit" value="input按钮提交"/>
						<a href="#" id="submitLink">提交</a>
						<a href="#" id="reset">重置</a>
					</div>
				</form>
				<div id="markdown">
					@@include(markdown('./index.md'))
				</div>
			</div>
		</div>
	</div>
	@@include('../../common/footer.html')
</body>
</html>
<script>
	var validator = nic.ui.validator({
		target:'#test',
        rules:function(obj, fn){
            if( obj[0].id == "testProcess" ){
                if( obj.val() != 1 ){
                    return false;
                }else{
                    return true;
                }
            }
        },
        ajax:function(obj, fn){
            if( obj[0].id == "testProcess2" ){
                $.ajax({
                    type: 'POST',
                    url: 'http://127.0.0.1/nic/www/temp/validate.php',
                    data: {name:obj.val()},
                    cache: false,
                    dataType: "json",
                    beforeSend: function(){
                        
                    },
                    success: function(data){
                        if( data ){
                            fn(true)
                        }else{
                            fn(false, true)
                        }
                    },
                    error: function(data){
                        console.log(data);
                    }
                });
            }
        }
	});

	$('input[name="textRaio"]').click(function(){
		if( $(this).val() == '1' ){
			$('#requiredWrap').removeClass('fn-hide');
		}else{
			$('#requiredWrap').addClass('fn-hide');
		}
	})
	
	$('body')
		.off('click','#submitLink')
		.on('click','#submitLink', function(){
			if( validator.validatorAll() ){
				console.log('验证通过！');
			}
		});
		
	$('input[type="submit"]').on('submit', function(){
		if( validator.getStatus() ){
			console.log('验证通过！');
		};
	})
	    
    $('#reset').click(function(){
        validator.reset();
    });

</script>